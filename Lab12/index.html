

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lab 12: Path Planning and Execution &mdash; ECE 5160: Fast Robots  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/color.css?v=75bc5ffc" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=187304be"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="prev" title="Lab 11: Localization on the Real Robot" href="../Lab11/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            ECE 5160: Fast Robots
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../home/">About Me</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab1A/">Lab 1A: Artemis Board</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab1B/">Lab 1B: Bluetooth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab2/">Lab 2: IMU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab3/">Lab 3: Time of Flight Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab4/">Lab 4: Motors and Open Loop Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab5/">Lab 5: Linear PID Control and Linear Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab6/">Lab 6: Orientation Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab7/">Lab 7: Kalman Filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab8/">Lab 8: Stunts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab9/">Lab 9: Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab10/">Lab 10: Grid Localization using Bayes Filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lab11/">Lab 11: Localization on the Real Robot</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lab 12: Path Planning and Execution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#method">Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#arduino-code">Arduino Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#forward-command">FORWARD Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linear-pid-command">LINEAR_PID Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#start-orient-pid-command">START_ORIENT_PID Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#localization-command">LOCALIZATION Command</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#python-code">Python Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#localization-observation-loop">Localization Observation Loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-step">Update Step</a></li>
<li class="toctree-l3"><a class="reference internal" href="#path-execution-code">Path Execution Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#challenges">Challenges</a></li>
<li class="toctree-l2"><a class="reference internal" href="#path-execution">Path Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes-and-references">Notes and References</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">ECE 5160: Fast Robots</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Lab 12: Path Planning and Execution</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Lab12.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lab-12-path-planning-and-execution">
<h1>Lab 12: Path Planning and Execution<a class="headerlink" href="#lab-12-path-planning-and-execution" title="Link to this heading"></a></h1>
<p>In this lab, our objective was to program the robot to follow a predefined path on the map, starting at coordinate (-4, -3) and ending at (0, 0), with stops and localization performed at each waypoint. Due to time constraints, we only collected localization data at the starred points and skipped the coordinate (5, -2) when traversing our path, as it lay directly between the straight path from (5, -3) to (5, 3). While we didn’t use localization to guide the robot’s movement, we used it to verify the accuracy of our belief estimates with Bayes.</p>
<p><img alt="" src="../_images/labeled_path.jpg" /></p>
<section id="method">
<h2>Method<a class="headerlink" href="#method" title="Link to this heading"></a></h2>
<p>To execute the path shown above, we used open loop control for forward movement from coordinates (-4,-3) to (1,-1) and linear PI control for the rest of the path legs. We used orientation PI control for every turn. We used Arduino code from previous labs and called my commands sequentially from Python code to complete this lab. Our path execution method required only three Arduino commands: LINEAR_PID, FORWARD, and START_ORIENT_PID. (<strong>Note:</strong> I never implemented the D term so these commands should be named PI, but there are too many instances where these command names are used, so I never renamed them.) Although we collect data for localization using our LOCALIZATION command, we do not actually use it in our path execution.</p>
</section>
<section id="arduino-code">
<h2>Arduino Code<a class="headerlink" href="#arduino-code" title="Link to this heading"></a></h2>
<section id="forward-command">
<h3>FORWARD Command<a class="headerlink" href="#forward-command" title="Link to this heading"></a></h3>
<p>The FORWARD command accepts a PWM value and duration as user inputs and moves the robot forward accordingly for the specified time at the given speed. The forward() function comes from my Lab 4 code.</p>
<p><img alt="" src="../_images/forward_case.jpg" /></p>
</section>
<section id="linear-pid-command">
<h3>LINEAR_PID Command<a class="headerlink" href="#linear-pid-command" title="Link to this heading"></a></h3>
<p>The LINEAR_PID command takes in user inputs for Kp, Ki, the target distance (setpoint), and the run_time, then executes the linear PID control accordingly. The run_time variable determines how long the while loop continues to compute the PI output, and we adjust it based on what we consider appropriate for each leg. The linear_PID() function is reused from my Lab 5 code.</p>
<p><img alt="" src="../_images/linear_pid.jpg" /></p>
</section>
<section id="start-orient-pid-command">
<h3>START_ORIENT_PID Command<a class="headerlink" href="#start-orient-pid-command" title="Link to this heading"></a></h3>
<p>The START_ORIENT_PID command is structured the same way as my LINEAR_PID command except we take a target angle as our setpoint. The orient_PID() function is reused from my Lab 6 code.</p>
<p><img alt="" src="../_images/start_orient_pid.jpg" /></p>
</section>
<section id="localization-command">
<h3>LOCALIZATION Command<a class="headerlink" href="#localization-command" title="Link to this heading"></a></h3>
<p>The LOCALIZATION command was taken from my Lab 11 code. The robot rotates counterclockwise pausing every 20 degrees to collect a measurement.</p>
<p><img alt="" src="../_images/localize.jpg" /></p>
<p><strong>Helper functions for LOCALIZATION</strong>
<img alt="" src="../_images/pause.jpg" /></p>
<p><img alt="" src="../_images/run_orient_pi.jpg" /></p>
</section>
</section>
<section id="python-code">
<h2>Python Code<a class="headerlink" href="#python-code" title="Link to this heading"></a></h2>
<section id="localization-observation-loop">
<h3>Localization Observation Loop<a class="headerlink" href="#localization-observation-loop" title="Link to this heading"></a></h3>
<p>Our observation loop function from Lab 11 was slightly adjusted since we’re using a combination of my code and Becky’s code, but it is essentially the same as before. We start our notification handler to collect angles and distances into an array, call the LOCALIZE command, and wait until all the data from the LOCALIZE command has been collected. We process and store this data into the arrays for the Bayes algorithm accordingly.</p>
<p><img alt="" src="../_images/observ_python.jpg" /></p>
</section>
<section id="update-step">
<h3>Update Step<a class="headerlink" href="#update-step" title="Link to this heading"></a></h3>
<p>We reused the update state for the Bayes algorithm that we had used in Lab 11 to obtain belief estimates for the three waypoints where we collected localization data.</p>
<p><img alt="" src="../_images/update_python.jpg" /></p>
</section>
<section id="path-execution-code">
<h3>Path Execution Code<a class="headerlink" href="#path-execution-code" title="Link to this heading"></a></h3>
<p>This is our final path execution code, with detailed comments throughout. For each leg of the path, the robot moves forward using either open-loop control or PI control, then turns using PI control to align itself for the next segment. The localization code for the three waypoints we described earlier is also clearly integrated in this section.
<img alt="" src="../_images/python_final_run_p1.jpg" /></p>
<p><img alt="" src="../_images/python_final_run_p2.jpg" /></p>
</section>
</section>
<section id="challenges">
<h2>Challenges<a class="headerlink" href="#challenges" title="Link to this heading"></a></h2>
<p>Initially, I planned to use my own robot, but I discovered that both of my time-of-flight sensors had stopped functioning—likely due to damage from the impact of my flip stunts. Code that had previously worked began returning either zero or erratic distance readings. The day after the ECE Robotics showcase, where I demonstrated the stunt, the serial monitor reported connection issues with both sensors. With limited time to desolder old connections and solder new connections, I decided to partner with Becky.</p>
<p>One challenge we faced was maintaining consistent and precise robot movements. Even when using PID control, the robot’s behavior varied with each run of the same code. This inconsistency may have been caused by factors such as battery drain over time and disturbances from people walking in and out of the mapped area, which could affect the linear PID. In earlier tests, the robot successfully reached the origin using PID. However, in our most visually successful run without human interference (shown below), the robot failed to turn sufficiently to detect the small wall. As a result, it overshot the origin, using the farther wall as the distance reference for PID instead.</p>
</section>
<section id="path-execution">
<h2>Path Execution<a class="headerlink" href="#path-execution" title="Link to this heading"></a></h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/EpykFcLn-yE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</section>
<hr class="docutils" />
<section id="notes-and-references">
<h2>Notes and References<a class="headerlink" href="#notes-and-references" title="Link to this heading"></a></h2>
<p>I partnered with Becky and discussed ideas on a high level with Akshati. We did not use outside references.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Lab11/" class="btn btn-neutral float-left" title="Lab 11: Localization on the Real Robot" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Annabel Lian.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>